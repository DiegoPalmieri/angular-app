<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profesor</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://googlecdn.com/myscript.js"></script>

    <script type="text/javascript" src="jquery-3.3.1.js"></script>

    <style>
      body {
        background-color: #f8f9fa;
      }

      .header {
        background-color: #007bff;
        color: #fff;
        padding: 20px;
        text-align: center;
      }

      .content {
        margin: 20px;
      }

      form {
        margin-bottom: 20px;
      }

      h2 {
        margin-top: 30px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Bienvenido Profesor</h1>
      </div>
      <div class="content">
        <h2>Reserva de Laboratorio</h2>
        <form id="reservaLaboratorio" action="" method="POST">
          <div class="form-group">
            <label for="salas">Salas Disponibles</label>
            <select id="salas" class="form-control" name="salas" required>
              <option value="">Seleccione la Sala</option>
              <optgroup label="Piso 1">
                <option value="E-104">E-104</option>
                <option value="E-105">E-105</option>
              </optgroup>

              <optgroup label="Piso 2">
                <option value="E-201">E-201</option>
                <option value="E-202">E-202</option>
                <option value="E-203">E-203</option>
                <option value="E-204">E-204</option>
              </optgroup>

              <optgroup label="Piso 3">
                <option value="E-301">E-301</option>
                <option value="E-302">E-302</option>
                <option value="E-303">E-303</option>
                <option value="3-304">E-304</option>
              </optgroup>
            </select>
          </div>
          <div class="form-group">
            <label for="fecha_laboratorio">Fecha:</label>
            <input
              id="fecha_laboratorio"
              class="form-control"
              type="date"
              name="fecha_laboratorio"
              required
            />
          </div>
          <div class="form-group">
            <label for="hora_inicio_laboratorio">Hora de Inicio:</label>
            <input
              id="hora_inicio_laboratorio"
              class="form-control"
              type="time"
              name="hora_inicio_laboratorio"
              required
            />
          </div>
          <div class="form-group">
            <label for="hora_fin_laboratorio">Hora de Fin:</label>
            <input
              id="hora_fin_laboratorio"
              class="form-control"
              type="time"
              name="hora_fin_laboratorio"
              required
            />
          </div>
          <button class="btn btn-primary" type="submit">
            Reservar Laboratorio
          </button>
        </form>
      </div>
    </div>

    <script>
      document
        .getElementById("botonReserva")
        .addEventListener("click", function () {
          window.location.href = "estadoReserva.html";
        });
    </script>

    <div id="mensaje"></div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const reservaForm = document.getElementById("reservaLaboratorio");
        const mensaje = document.getElementById("mensaje");

        reservaForm.addEventListener("submit", function (e) {
          e.preventDefault();
          const horaInicio = new Date(
            `1970-01-01T${
              document.getElementById("hora_inicio_laboratorio").value
            }`
          );
          const horaFin = new Date(
            `1970-01-01T${
              document.getElementById("hora_fin_laboratorio").value
            }`
          );
          const horaDiferencia = (horaFin - horaInicio) / (60 * 60 * 1000);

          if (horaDiferencia <= 2 && horaDiferencia >= 0) {
            alert("RESERVA EXITOSA");
          } else {
            alert("ERROR, NO PUEDE RESERVAR POR MAS DE DOS HORAS");
          }
        });
      });
    </script>
  </body>
</html>
